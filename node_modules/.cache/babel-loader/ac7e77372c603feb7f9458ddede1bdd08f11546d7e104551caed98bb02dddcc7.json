{"ast":null,"code":"import _objectSpread from\"C:/Users/Owner/Documents/todo/todofrontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useEffect,useState}from\"react\";import axios from\"axios\";import Login from\"./Login\";import\"./App.css\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const App=()=>{const[user,setUser]=useState(null);const[todos,setTodos]=useState([]);const[task,setTask]=useState(\"\");const[searchFilter,setSearchFilter]=useState(\"all\");const API_BASE=\"https://boiling-thicket-60899-05bdfce02845.herokuapp.com/api/todos\";// Fetch Todos\nuseEffect(()=>{fetchTodos();},[searchFilter,user]);const fetchTodos=async()=>{if(!user)return;try{console.log(\"Fetching todos for user \".concat(user.id));const response=await axios.get(\"\".concat(API_BASE,\"/user/\").concat(user.id));console.log(\"Fetched todos:\",response.data);setTodos(response.data);}catch(error){console.error(\"Error fetching todos\",error);}};const addTodo=async()=>{if(!task.trim()||!user){console.error(\"Task or user is missing\");return;}console.log(\"Add todo payload:\",{task:task.trim(),completed:false,user:{id:user.id,username:user.username}});try{const response=await axios.post(\"https://boiling-thicket-60899-05bdfce02845.herokuapp.com/api/todos/\",{task:task.trim(),completed:false,user:{id:user.id,username:user.username}});console.log(\"Added todo:\",response.data);setTodos(prev=>[...prev,response.data]);setTask(\"\");}catch(error){var _error$response;console.error(\"Add todo error:\",error);console.error(\"Error details:\",(_error$response=error.response)===null||_error$response===void 0?void 0:_error$response.data);}};// Update Todo\nconst updateTodo=async(id,updatedTodo)=>{try{const todoToUpdate=todos.find(t=>t.id===id);if(!todoToUpdate)return;const response=await axios.put(\"\".concat(API_BASE,\"/\").concat(id),_objectSpread(_objectSpread(_objectSpread({},todoToUpdate),updatedTodo),{},{user:{id:user===null||user===void 0?void 0:user.id}}));setTodos(prev=>prev.map(todo=>todo.id===id?response.data:todo));}catch(error){console.error(\"Error updating todo\",error);}};// Delete Todo\nconst deleteTodo=async id=>{try{await axios.delete(\"\".concat(API_BASE,\"/\").concat(id));setTodos(prev=>prev.filter(todo=>todo.id!==id));}catch(error){console.error(\"Error deleting todo\",error);}};// If not logged in, show login component\nif(!user){return/*#__PURE__*/_jsx(Login,{onLogin:loggedInUser=>setUser(loggedInUser)});}return/*#__PURE__*/_jsxs(\"div\",{className:\"app-container\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Todo App\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Welcome, \",user.username]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setUser(null),children:\"Logout\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"add-todo-container\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Task\",value:task,onChange:e=>setTask(e.target.value)}),/*#__PURE__*/_jsx(\"button\",{onClick:addTodo,children:\"Add\"})]}),/*#__PURE__*/_jsxs(\"select\",{value:searchFilter,onChange:e=>setSearchFilter(e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"all\",children:\"All\"}),/*#__PURE__*/_jsx(\"option\",{value:\"completed\",children:\"Completed\"}),/*#__PURE__*/_jsx(\"option\",{value:\"incomplete\",children:\"Incomplete\"})]}),/*#__PURE__*/_jsx(\"div\",{children:todos.map(todo=>/*#__PURE__*/_jsxs(\"div\",{className:\"todo-item \".concat(todo.completed?\"completed\":\"\"),children:[/*#__PURE__*/_jsx(\"h3\",{className:\"todo-item-text \".concat(todo.completed?\"completed\":\"\"),children:todo.task}),/*#__PURE__*/_jsxs(\"div\",{className:\"todo-buttons\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"complete-btn \".concat(todo.completed?\"completed\":\"\"),onClick:()=>updateTodo(todo.id,{completed:!todo.completed}),children:todo.completed?\"Mark Incomplete\":\"Mark Complete\"}),/*#__PURE__*/_jsx(\"button\",{className:\"delete-btn\",onClick:()=>deleteTodo(todo.id),children:\"Delete\"})]})]},todo.id))})]});};export default App;","map":{"version":3,"names":["React","useEffect","useState","axios","Login","jsx","_jsx","jsxs","_jsxs","App","user","setUser","todos","setTodos","task","setTask","searchFilter","setSearchFilter","API_BASE","fetchTodos","console","log","concat","id","response","get","data","error","addTodo","trim","completed","username","post","prev","_error$response","updateTodo","updatedTodo","todoToUpdate","find","t","put","_objectSpread","map","todo","deleteTodo","delete","filter","onLogin","loggedInUser","className","children","onClick","type","placeholder","value","onChange","e","target"],"sources":["C:/Users/Owner/Documents/todo/todofrontend/src/App.tsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport Login from \"./Login\";\nimport \"./App.css\";\n\ninterface Todo {\n  id: number;\n  task: string;\n  completed: boolean;\n  user: {\n    id: number;\n    username: string;\n  };\n}\n\ninterface User {\n  id: number;\n  username: string;\n  password: string;\n}\n\nconst App: React.FC = () => {\n  const [user, setUser] = useState<User | null>(null);\n  const [todos, setTodos] = useState<Todo[]>([]);\n  const [task, setTask] = useState<string>(\"\");\n  const [searchFilter, setSearchFilter] = useState<string>(\"all\");\n\n  const API_BASE =\n    \"https://boiling-thicket-60899-05bdfce02845.herokuapp.com/api/todos\";\n\n  // Fetch Todos\n  useEffect(() => {\n    fetchTodos();\n  }, [searchFilter, user]);\n\n  const fetchTodos = async () => {\n    if (!user) return;\n    try {\n      console.log(`Fetching todos for user ${user.id}`);\n      const response = await axios.get<Todo[]>(`${API_BASE}/user/${user.id}`);\n      console.log(\"Fetched todos:\", response.data);\n      setTodos(response.data);\n    } catch (error) {\n      console.error(\"Error fetching todos\", error);\n    }\n  };\n\n  const addTodo = async () => {\n    if (!task.trim() || !user) {\n      console.error(\"Task or user is missing\");\n      return;\n    }\n\n    console.log(\"Add todo payload:\", {\n      task: task.trim(),\n      completed: false,\n      user: {\n        id: user.id,\n        username: user.username,\n      },\n    });\n\n    try {\n      const response = await axios.post<Todo>(\n        \"https://boiling-thicket-60899-05bdfce02845.herokuapp.com/api/todos/\",\n        {\n          task: task.trim(),\n          completed: false,\n          user: {\n            id: user.id,\n            username: user.username,\n          },\n        }\n      );\n\n      console.log(\"Added todo:\", response.data);\n      setTodos((prev) => [...prev, response.data]);\n      setTask(\"\");\n    } catch (error: any) {\n      console.error(\"Add todo error:\", error);\n      console.error(\"Error details:\", error.response?.data);\n    }\n  };\n\n  // Update Todo\n  const updateTodo = async (id: number, updatedTodo: Partial<Todo>) => {\n    try {\n      const todoToUpdate = todos.find((t) => t.id === id);\n      if (!todoToUpdate) return;\n\n      const response = await axios.put<Todo>(`${API_BASE}/${id}`, {\n        ...todoToUpdate,\n        ...updatedTodo,\n        user: { id: user?.id },\n      });\n\n      setTodos((prev) =>\n        prev.map((todo) => (todo.id === id ? response.data : todo))\n      );\n    } catch (error) {\n      console.error(\"Error updating todo\", error);\n    }\n  };\n\n  // Delete Todo\n  const deleteTodo = async (id: number) => {\n    try {\n      await axios.delete(`${API_BASE}/${id}`);\n      setTodos((prev) => prev.filter((todo) => todo.id !== id));\n    } catch (error) {\n      console.error(\"Error deleting todo\", error);\n    }\n  };\n\n  // If not logged in, show login component\n  if (!user) {\n    return <Login onLogin={(loggedInUser) => setUser(loggedInUser)} />;\n  }\n\n  return (\n    <div className=\"app-container\">\n      <h1>Todo App</h1>\n      <p>Welcome, {user.username}</p>\n      <button onClick={() => setUser(null)}>Logout</button>\n\n      <div className=\"add-todo-container\">\n        <input\n          type=\"text\"\n          placeholder=\"Task\"\n          value={task}\n          onChange={(e) => setTask(e.target.value)}\n        />\n        <button onClick={addTodo}>Add</button>\n      </div>\n\n      <select\n        value={searchFilter}\n        onChange={(e) => setSearchFilter(e.target.value)}\n      >\n        <option value=\"all\">All</option>\n        <option value=\"completed\">Completed</option>\n        <option value=\"incomplete\">Incomplete</option>\n      </select>\n\n      <div>\n        {todos.map((todo) => (\n          <div\n            key={todo.id}\n            className={`todo-item ${todo.completed ? \"completed\" : \"\"}`}\n          >\n            <h3\n              className={`todo-item-text ${todo.completed ? \"completed\" : \"\"}`}\n            >\n              {todo.task}\n            </h3>\n            <div className=\"todo-buttons\">\n              <button\n                className={`complete-btn ${todo.completed ? \"completed\" : \"\"}`}\n                onClick={() =>\n                  updateTodo(todo.id, { completed: !todo.completed })\n                }\n              >\n                {todo.completed ? \"Mark Incomplete\" : \"Mark Complete\"}\n              </button>\n              <button\n                className=\"delete-btn\"\n                onClick={() => deleteTodo(todo.id)}\n              >\n                Delete\n              </button>\n            </div>\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n};\n\nexport default App;\n"],"mappings":"+HAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAClD,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,MAAO,CAAAC,KAAK,KAAM,SAAS,CAC3B,MAAO,WAAW,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAkBnB,KAAM,CAAAC,GAAa,CAAGA,CAAA,GAAM,CAC1B,KAAM,CAACC,IAAI,CAAEC,OAAO,CAAC,CAAGT,QAAQ,CAAc,IAAI,CAAC,CACnD,KAAM,CAACU,KAAK,CAAEC,QAAQ,CAAC,CAAGX,QAAQ,CAAS,EAAE,CAAC,CAC9C,KAAM,CAACY,IAAI,CAAEC,OAAO,CAAC,CAAGb,QAAQ,CAAS,EAAE,CAAC,CAC5C,KAAM,CAACc,YAAY,CAAEC,eAAe,CAAC,CAAGf,QAAQ,CAAS,KAAK,CAAC,CAE/D,KAAM,CAAAgB,QAAQ,CACZ,oEAAoE,CAEtE;AACAjB,SAAS,CAAC,IAAM,CACdkB,UAAU,CAAC,CAAC,CACd,CAAC,CAAE,CAACH,YAAY,CAAEN,IAAI,CAAC,CAAC,CAExB,KAAM,CAAAS,UAAU,CAAG,KAAAA,CAAA,GAAY,CAC7B,GAAI,CAACT,IAAI,CAAE,OACX,GAAI,CACFU,OAAO,CAACC,GAAG,4BAAAC,MAAA,CAA4BZ,IAAI,CAACa,EAAE,CAAE,CAAC,CACjD,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAArB,KAAK,CAACsB,GAAG,IAAAH,MAAA,CAAYJ,QAAQ,WAAAI,MAAA,CAASZ,IAAI,CAACa,EAAE,CAAE,CAAC,CACvEH,OAAO,CAACC,GAAG,CAAC,gBAAgB,CAAEG,QAAQ,CAACE,IAAI,CAAC,CAC5Cb,QAAQ,CAACW,QAAQ,CAACE,IAAI,CAAC,CACzB,CAAE,MAAOC,KAAK,CAAE,CACdP,OAAO,CAACO,KAAK,CAAC,sBAAsB,CAAEA,KAAK,CAAC,CAC9C,CACF,CAAC,CAED,KAAM,CAAAC,OAAO,CAAG,KAAAA,CAAA,GAAY,CAC1B,GAAI,CAACd,IAAI,CAACe,IAAI,CAAC,CAAC,EAAI,CAACnB,IAAI,CAAE,CACzBU,OAAO,CAACO,KAAK,CAAC,yBAAyB,CAAC,CACxC,OACF,CAEAP,OAAO,CAACC,GAAG,CAAC,mBAAmB,CAAE,CAC/BP,IAAI,CAAEA,IAAI,CAACe,IAAI,CAAC,CAAC,CACjBC,SAAS,CAAE,KAAK,CAChBpB,IAAI,CAAE,CACJa,EAAE,CAAEb,IAAI,CAACa,EAAE,CACXQ,QAAQ,CAAErB,IAAI,CAACqB,QACjB,CACF,CAAC,CAAC,CAEF,GAAI,CACF,KAAM,CAAAP,QAAQ,CAAG,KAAM,CAAArB,KAAK,CAAC6B,IAAI,CAC/B,qEAAqE,CACrE,CACElB,IAAI,CAAEA,IAAI,CAACe,IAAI,CAAC,CAAC,CACjBC,SAAS,CAAE,KAAK,CAChBpB,IAAI,CAAE,CACJa,EAAE,CAAEb,IAAI,CAACa,EAAE,CACXQ,QAAQ,CAAErB,IAAI,CAACqB,QACjB,CACF,CACF,CAAC,CAEDX,OAAO,CAACC,GAAG,CAAC,aAAa,CAAEG,QAAQ,CAACE,IAAI,CAAC,CACzCb,QAAQ,CAAEoB,IAAI,EAAK,CAAC,GAAGA,IAAI,CAAET,QAAQ,CAACE,IAAI,CAAC,CAAC,CAC5CX,OAAO,CAAC,EAAE,CAAC,CACb,CAAE,MAAOY,KAAU,CAAE,KAAAO,eAAA,CACnBd,OAAO,CAACO,KAAK,CAAC,iBAAiB,CAAEA,KAAK,CAAC,CACvCP,OAAO,CAACO,KAAK,CAAC,gBAAgB,EAAAO,eAAA,CAAEP,KAAK,CAACH,QAAQ,UAAAU,eAAA,iBAAdA,eAAA,CAAgBR,IAAI,CAAC,CACvD,CACF,CAAC,CAED;AACA,KAAM,CAAAS,UAAU,CAAG,KAAAA,CAAOZ,EAAU,CAAEa,WAA0B,GAAK,CACnE,GAAI,CACF,KAAM,CAAAC,YAAY,CAAGzB,KAAK,CAAC0B,IAAI,CAAEC,CAAC,EAAKA,CAAC,CAAChB,EAAE,GAAKA,EAAE,CAAC,CACnD,GAAI,CAACc,YAAY,CAAE,OAEnB,KAAM,CAAAb,QAAQ,CAAG,KAAM,CAAArB,KAAK,CAACqC,GAAG,IAAAlB,MAAA,CAAUJ,QAAQ,MAAAI,MAAA,CAAIC,EAAE,EAAAkB,aAAA,CAAAA,aAAA,CAAAA,aAAA,IACnDJ,YAAY,EACZD,WAAW,MACd1B,IAAI,CAAE,CAAEa,EAAE,CAAEb,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAEa,EAAG,CAAC,EACvB,CAAC,CAEFV,QAAQ,CAAEoB,IAAI,EACZA,IAAI,CAACS,GAAG,CAAEC,IAAI,EAAMA,IAAI,CAACpB,EAAE,GAAKA,EAAE,CAAGC,QAAQ,CAACE,IAAI,CAAGiB,IAAK,CAC5D,CAAC,CACH,CAAE,MAAOhB,KAAK,CAAE,CACdP,OAAO,CAACO,KAAK,CAAC,qBAAqB,CAAEA,KAAK,CAAC,CAC7C,CACF,CAAC,CAED;AACA,KAAM,CAAAiB,UAAU,CAAG,KAAO,CAAArB,EAAU,EAAK,CACvC,GAAI,CACF,KAAM,CAAApB,KAAK,CAAC0C,MAAM,IAAAvB,MAAA,CAAIJ,QAAQ,MAAAI,MAAA,CAAIC,EAAE,CAAE,CAAC,CACvCV,QAAQ,CAAEoB,IAAI,EAAKA,IAAI,CAACa,MAAM,CAAEH,IAAI,EAAKA,IAAI,CAACpB,EAAE,GAAKA,EAAE,CAAC,CAAC,CAC3D,CAAE,MAAOI,KAAK,CAAE,CACdP,OAAO,CAACO,KAAK,CAAC,qBAAqB,CAAEA,KAAK,CAAC,CAC7C,CACF,CAAC,CAED;AACA,GAAI,CAACjB,IAAI,CAAE,CACT,mBAAOJ,IAAA,CAACF,KAAK,EAAC2C,OAAO,CAAGC,YAAY,EAAKrC,OAAO,CAACqC,YAAY,CAAE,CAAE,CAAC,CACpE,CAEA,mBACExC,KAAA,QAAKyC,SAAS,CAAC,eAAe,CAAAC,QAAA,eAC5B5C,IAAA,OAAA4C,QAAA,CAAI,UAAQ,CAAI,CAAC,cACjB1C,KAAA,MAAA0C,QAAA,EAAG,WAAS,CAACxC,IAAI,CAACqB,QAAQ,EAAI,CAAC,cAC/BzB,IAAA,WAAQ6C,OAAO,CAAEA,CAAA,GAAMxC,OAAO,CAAC,IAAI,CAAE,CAAAuC,QAAA,CAAC,QAAM,CAAQ,CAAC,cAErD1C,KAAA,QAAKyC,SAAS,CAAC,oBAAoB,CAAAC,QAAA,eACjC5C,IAAA,UACE8C,IAAI,CAAC,MAAM,CACXC,WAAW,CAAC,MAAM,CAClBC,KAAK,CAAExC,IAAK,CACZyC,QAAQ,CAAGC,CAAC,EAAKzC,OAAO,CAACyC,CAAC,CAACC,MAAM,CAACH,KAAK,CAAE,CAC1C,CAAC,cACFhD,IAAA,WAAQ6C,OAAO,CAAEvB,OAAQ,CAAAsB,QAAA,CAAC,KAAG,CAAQ,CAAC,EACnC,CAAC,cAEN1C,KAAA,WACE8C,KAAK,CAAEtC,YAAa,CACpBuC,QAAQ,CAAGC,CAAC,EAAKvC,eAAe,CAACuC,CAAC,CAACC,MAAM,CAACH,KAAK,CAAE,CAAAJ,QAAA,eAEjD5C,IAAA,WAAQgD,KAAK,CAAC,KAAK,CAAAJ,QAAA,CAAC,KAAG,CAAQ,CAAC,cAChC5C,IAAA,WAAQgD,KAAK,CAAC,WAAW,CAAAJ,QAAA,CAAC,WAAS,CAAQ,CAAC,cAC5C5C,IAAA,WAAQgD,KAAK,CAAC,YAAY,CAAAJ,QAAA,CAAC,YAAU,CAAQ,CAAC,EACxC,CAAC,cAET5C,IAAA,QAAA4C,QAAA,CACGtC,KAAK,CAAC8B,GAAG,CAAEC,IAAI,eACdnC,KAAA,QAEEyC,SAAS,cAAA3B,MAAA,CAAeqB,IAAI,CAACb,SAAS,CAAG,WAAW,CAAG,EAAE,CAAG,CAAAoB,QAAA,eAE5D5C,IAAA,OACE2C,SAAS,mBAAA3B,MAAA,CAAoBqB,IAAI,CAACb,SAAS,CAAG,WAAW,CAAG,EAAE,CAAG,CAAAoB,QAAA,CAEhEP,IAAI,CAAC7B,IAAI,CACR,CAAC,cACLN,KAAA,QAAKyC,SAAS,CAAC,cAAc,CAAAC,QAAA,eAC3B5C,IAAA,WACE2C,SAAS,iBAAA3B,MAAA,CAAkBqB,IAAI,CAACb,SAAS,CAAG,WAAW,CAAG,EAAE,CAAG,CAC/DqB,OAAO,CAAEA,CAAA,GACPhB,UAAU,CAACQ,IAAI,CAACpB,EAAE,CAAE,CAAEO,SAAS,CAAE,CAACa,IAAI,CAACb,SAAU,CAAC,CACnD,CAAAoB,QAAA,CAEAP,IAAI,CAACb,SAAS,CAAG,iBAAiB,CAAG,eAAe,CAC/C,CAAC,cACTxB,IAAA,WACE2C,SAAS,CAAC,YAAY,CACtBE,OAAO,CAAEA,CAAA,GAAMP,UAAU,CAACD,IAAI,CAACpB,EAAE,CAAE,CAAA2B,QAAA,CACpC,QAED,CAAQ,CAAC,EACN,CAAC,GAvBDP,IAAI,CAACpB,EAwBP,CACN,CAAC,CACC,CAAC,EACH,CAAC,CAEV,CAAC,CAED,cAAe,CAAAd,GAAG","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}